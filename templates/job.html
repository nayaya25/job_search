<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobMatch - Job Search</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e1e4e8;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        nav {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        
        .nav-button {
            color: #2c3e50;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 4px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-button:hover {
            background-color: #f0f0f0;
        }
        
        .nav-button i {
            font-size: 16px;
        }

        /* Job Search Section */
        .search-section {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 25px;
            color: #2c3e50;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .skill-tag {
            background-color: #eaf2f8;
            color: #3498db;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .skill-tag.selected {
            background-color: #3498db;
            color: white;
        }
        
        .search-options {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            align-items: center;
        }
        
        .location-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .location-option label {
            font-weight: 500;
            cursor: pointer;
        }
        
        .search-bar {
            display: flex;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .search-input {
            flex: 1;
            padding: 14px 18px;
            border: none;
            font-size: 16px;
            outline: none;
        }
        
        .search-button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 0 24px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .search-button:hover {
            background-color: #2980b9;
        }

        /* Jobs Section */
        .jobs-section {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: none;
        }
        
        .jobs-list {
            margin-top: 20px;
        }
        
        .no-jobs {
            text-align: center;
            padding: 40px 0;
            color: #7f8c8d;
        }
        
        .job-card {
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 15px;
            transition: box-shadow 0.3s;
            display: flex;
            gap: 20px;
        }
        
        .job-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .company-logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .company-logo img {
            max-width: 100%;
            max-height: 100%;
        }
        
        .job-details {
            flex: 1;
        }
        
        .job-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .job-company {
            color: #3498db;
            margin-bottom: 10px;
            font-size: 15px;
        }
        
        .job-location {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .job-location i {
            font-size: 12px;
        }
        
        .job-type {
            display: inline-block;
            padding: 3px 8px;
            background-color: #e8f8f5;
            color: #27ae60;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .job-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .job-skill {
            background-color: #eaf2f8;
            color: #3498db;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .job-actions {
            display: flex;
            justify-content: flex-end;
        }
        
        .apply-button {
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .apply-button:hover {
            background-color: #27ae60;
        }
        
        .application-form-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .application-form {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .form-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .close-form {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            min-height: 100px;
            resize: vertical;
        }
        
        .file-upload-options {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .upload-option {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        
        .upload-option input {
            display: none;
        }
        
        .upload-option-label {
            padding: 8px 12px;
            border-radius: 4px;
            background-color: #eaf2f8;
            color: #3498db;
            transition: all 0.3s;
        }
        
        .upload-option-label:hover {
            background-color: #d4e6f1;
        }
        
        .upload-option input:checked + .upload-option-label {
            background-color: #3498db;
            color: white;
        }
        
        .file-upload-container {
            display: none;
            margin-top: 10px;
        }
        
        .file-upload-container.active {
            display: block;
        }
        
        .file-upload-box {
            border: 2px dashed #ddd;
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        
        .file-upload-box:hover {
            border-color: #3498db;
        }
        
        .file-upload-box i {
            font-size: 24px;
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .file-upload-box p {
            margin: 0;
            color: #7f8c8d;
        }
        
        .file-name {
            margin-top: 10px;
            font-size: 14px;
            color: #3498db;
            display: none;
        }
        
        .submit-button {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
        }
        
        .submit-button:hover {
            background-color: #2980b9;
        }
        
        .success-message {
            display: none;
            text-align: center;
            padding: 20px;
            color: #27ae60;
            font-weight: 500;
        }
        
        .error-message {
            display: none;
            text-align: center;
            padding: 20px;
            color: #e74c3c;
            font-weight: 500;
        }
        
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #3498db;
            width: 40px;
            height: 40px;
            margin: 0 auto 15px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .no-results {
            text-align: center;
            padding: 40px 0;
            color: #7f8c8d;
        }
        
        .search-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .filter-pill {
            background-color: #f0f7fb;
            border: 1px solid #d4e6f1;
            color: #3498db;
            border-radius: 20px;
            padding: 5px 12px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .remove-filter {
            cursor: pointer;
            color: #7f8c8d;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">JobMatch</div>
            <nav>
                <a href="{{ url_for('home') }}" class="nav-button">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="{{ url_for('jobs') }}" class="nav-button active">
                    <i class="fas fa-briefcase"></i> Jobs
                </a>
                <form method="POST" action="{{ url_for('submit_post') }}">

            </nav>
        </header>
        
        <div class="search-section">
            <h2 class="section-title">SELECT YOUR SKILLS</h2>
            
            <div class="skills-container" id="skillsContainer">
                <!-- Skills will be added here dynamically -->
            </div>
            
            <div class="search-options">
                <div class="location-option">
                    <input type="radio" id="remote" name="location" value="remote" checked>
                    <label for="remote">Remote</label>
                </div>
                <div class="location-option">
                    <input type="radio" id="physical" name="location" value="physical">
                    <label for="physical">Physical (Nigeria)</label>
                </div>
                <div class="location-option">
                    <input type="radio" id="both" name="location" value="both">
                    <label for="both">Both</label>
                </div>
            </div>
            
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="Search Jobs (e.g. 'Frontend Developer', 'Lagos')" id="jobSearchInput">
                <button class="search-button" id="searchButton">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
            
            <div class="search-filters" id="searchFilters">
                <!-- Active filters will appear here -->
            </div>
        </div>
        
        <div class="jobs-section" id="jobsSection">
            <h2 class="section-title">Available Jobs</h2>
            <div class="jobs-list" id="jobsList">
                <div class="no-jobs">
                    No jobs found matching your selected skills.
                </div>
            </div>
        </div>
        
        <!-- Application Form (hidden by default) -->
    
    <!-- FORM END -->

    <!-- Submission Feedback -->
    <div class="loading-spinner" id="loadingSpinner" style="display: none;">
      <div class="spinner"></div>
      <p>Submitting your application...</p>
    </div>

    <div class="success-message" id="successMessage" style="display: none;">
      <i class="fas fa-check-circle" style="font-size: 48px; margin-bottom: 15px; color: #27ae60;"></i>
      <h3>Application Submitted Successfully!</h3>
      <p>We've sent a confirmation to your email. The company will contact you if you're shortlisted.</p>
    </div>

    <div class="error-message" id="errorMessage" style="display: none;">
      <i class="fas fa-exclamation-circle" style="font-size: 48px; margin-bottom: 15px; color: #e74c3c;"></i>
      <h3>Submission Failed</h3>
      <p>There was an error submitting your application. Please try again later.</p>
    </div>
  </div>
</div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Expanded skills list with more variety and organization
            const skills = [
                // Technical Skills - Programming Languages
                'JavaScript', 'TypeScript', 'Python', 'Java', 'C#', 'PHP', 'Ruby', 'Go', 'Swift', 'Kotlin',
                'Rust', 'C++', 'Scala', 'Perl', 'R', 'MATLAB', 'Shell Scripting', 'Dart',
                
                // Technical Skills - Frontend
                'React', 'Angular', 'Vue.js', 'Next.js', 'Svelte', 'jQuery', 'Redux', 'HTML', 'CSS', 
                'SASS/SCSS', 'Bootstrap', 'Tailwind CSS', 'Material UI', 'Chakra UI', 'Styled Components',
                'Webpack', 'Vite', 'Responsive Design', 'Progressive Web Apps', 'Web Performance',
                
                // Technical Skills - Backend
                'Node.js', 'Express.js', 'Django', 'Flask', 'Laravel', 'Spring Boot', '.NET', 'Ruby on Rails',
                'FastAPI', 'Nest.js', 'GraphQL', 'REST API', 'gRPC', 'WebSockets', 'Microservices',
                'Serverless', 'API Development', 'OAuth', 'JWT',
                
                // Technical Skills - Database
                'MySQL', 'PostgreSQL', 'MongoDB', 'Redis', 'Elasticsearch', 'SQLite', 'Firebase',
                'DynamoDB', 'Oracle', 'SQL Server', 'Cassandra', 'Neo4j', 'Supabase', 'ORM',
                
                // Technical Skills - DevOps & Cloud
                'AWS', 'Azure', 'Google Cloud', 'Kubernetes', 'Docker', 'CI/CD', 'Jenkins', 'GitHub Actions',
                'Terraform', 'Ansible', 'Linux', 'Nginx', 'Apache', 'AWS Lambda', 'ECS', 'S3',
                'Monitoring', 'Logging', 'Cloud Security',
                
                // Technical Skills - Mobile
                'React Native', 'Flutter', 'Android Development', 'iOS Development', 'Xamarin',
                'Mobile UI Design', 'App Performance', 'App Store Optimization',
                
                // Technical Skills - Tools & Version Control
                'Git', 'GitHub', 'GitLab', 'Bitbucket', 'Jira', 'Confluence', 'Trello', 'Postman',
                'Swagger', 'VS Code', 'IntelliJ', 'PyCharm', 'Sublime Text',
                
                // Design Skills
                'UI/UX Design', 'Figma', 'Adobe XD', 'Sketch', 'Photoshop', 'Illustrator', 'InDesign',
                'User Research', 'Wireframing', 'Prototyping', 'Design Systems', 'Accessibility',
                'User Testing', 'Interaction Design', 'Visual Design', 'Motion Design',
                
                // Data Science & Analytics
                'Data Analysis', 'Machine Learning', 'Deep Learning', 'Natural Language Processing',
                'Computer Vision', 'Data Visualization', 'Statistics', 'Big Data', 'Data Mining',
                'Predictive Modeling', 'TensorFlow', 'PyTorch', 'scikit-learn', 'pandas', 'Tableau',
                'Power BI', 'Data Warehousing', 'ETL',
                
                // Business/Professional Skills
                'Project Management', 'Agile Methodology', 'Scrum', 'Kanban', 'Product Management',
                'Business Analysis', 'Digital Marketing', 'SEO', 'Content Marketing', 'Social Media Marketing',
                'Email Marketing', 'Growth Hacking', 'SaaS', 'E-commerce', 'Financial Analysis',
                'Risk Management', 'Quality Assurance', 'Technical Writing', 'Customer Service',
                'Sales', 'Business Development', 'Strategic Planning', 'Team Leadership',
                
                // Creative Skills
                'Content Writing', 'Copywriting', 'Technical Writing', 'Video Production',
                'Video Editing', 'Animation', '3D Modeling', 'Graphic Design', 'Branding',
                'Photography', 'Audio Editing', 'Podcast Production',
                
                // Nigerian-specific Skills
                'Flutterwave API', 'Paystack API', 'Nigerian Banking APIs', 'Nigerian Tax Laws',
                'Local SEO (Nigeria)', 'Nigerian Market Research', 'Nigerian Languages',
                'Financial Inclusion', 'Mobile Money', 'USSD Development', 'African Consumer Insights'
            ];
            
            // Expanded jobs list focused on Nigeria with more diversity
            const jobs = [
                {
                    title: 'Frontend Developer',
                    company: 'Flutterwave',
                    logo: 'https://flutterwave.com/images/logo/full.svg',
                    location: 'Lagos, Nigeria',
                    type: 'physical',
                    skills: ['JavaScript', 'React', 'HTML', 'CSS', 'REST API'],
                    description: 'Join our team to build beautiful interfaces for our payment solutions.',
                    posted: '2 days ago',
                    salary: '₦400,000 - ₦700,000 monthly'
                },
                {
                    title: 'Backend Engineer',
                    company: 'Paystack',
                    logo: 'https://website-files.com/5f65e6eb/5f6837c2_Paystack%20Logo%20-%20Blue%20(1).png',
                    location: 'Remote (Nigeria)',
                    type: 'remote',
                    skills: ['Node.js', 'Python', 'MySQL', 'REST API', 'AWS'],
                    description: 'Develop and maintain our payment processing infrastructure.',
                    posted: '5 days ago',
                    salary: '₦450,000 - ₦750,000 monthly'
                },
                {
                    title: 'UX Designer',
                    company: 'Andela',
                    logo: 'https://andela.com/wp-content/uploads/2022/02/andela-logo.png',
                    location: 'Lagos, Nigeria',
                    type: 'physical',
                    skills: ['UI/UX Design', 'Figma', 'Prototyping', 'User Research'],
                    description: 'Design exceptional user experiences for our global clients.',
                    posted: '1 week ago',
                    salary: '₦350,000 - ₦600,000 monthly'
                },
                {
                    title: 'Digital Marketer',
                    company: 'Jumia',
                    logo: 'https://www.jumia.com.ng/assets_he/images/jumia-logo.png',
                    location: 'Lagos, Nigeria',
                    type: 'physical',
                    skills: ['Digital Marketing', 'SEO', 'Content Marketing', 'Social Media Marketing'],
                    description: 'Drive customer acquisition through innovative marketing campaigns.',
                    posted: '3 days ago',
                    salary: '₦300,000 - ₦500,000 monthly'
                },
                {
                    title: 'Data Analyst',
                    company: 'Kuda Bank',
                    logo: 'https://kuda.com/static/images/logo.svg',
                    location: 'Remote (Africa)',
                    type: 'remote',
                    skills: ['Data Analysis', 'SQL', 'Python', 'Business Analysis', 'Data Visualization'],
                    description: 'Analyze customer data to drive business decisions and improve financial products.',
                    posted: '1 week ago',
                    salary: '₦400,000 - ₦650,000 monthly'
                },
                {
                    title: 'DevOps Engineer',
                    company: 'Interswitch',
                    logo: 'https://www.interswitchgroup.com/assets/images/home/interswitch-logo.svg',
                    location: 'Lagos, Nigeria',
                    type: 'physical',
                    skills: ['AWS', 'Docker', 'Kubernetes', 'CI/CD', 'Linux'],
                    description: 'Maintain and optimize our cloud infrastructure for financial services.',
                    posted: '2 weeks ago',
                    salary: '₦500,000 - ₦800,000 monthly'
                },
                {
                    title: 'Content Writer',
                    company: 'TechCabal',
                    logo: 'https://techcabal.com/wp-content/uploads/2020/07/cropped-TechCabal-Mobile-Logo.png',
                    location: 'Remote (Nigeria)',
                    type: 'remote',
                    skills: ['Content Writing', 'Technical Writing', 'Research'],
                    description: 'Create engaging content about African tech ecosystems.',
                    posted: '3 days ago',
                    salary: '₦250,000 - ₦400,000 monthly'
                },
                {
                    title: 'Product Manager',
                    company: 'Cowrywise',
                    logo: 'https://cowrywise.com/favicon-196x196.png',
                    location: 'Lagos, Nigeria',
                    type: 'physical',
                    skills: ['Product Management', 'Agile Methodology', 'JIRA', 'User Research'],
                    description: 'Lead product development for our investment platform.',
                    posted: '6 days ago',
                    salary: '₦500,000 - ₦850,000 monthly'
                },
                {
                    title: 'Mobile Developer',
                    company: 'Carbon',
                    logo: 'https://www.withcarbon.com/carbon.png',
                    location: 'Lagos, Nigeria',
                    type: 'physical',
                    skills: ['Flutter', 'Dart', 'Mobile Development', 'Firebase'],
                    description: 'Build and maintain our mobile banking application.',
                    posted: '4 days ago',
                    salary: '₦450,000 - ₦700,000 monthly'
                },
                {
                    title: 'Cybersecurity Specialist',
                    company: 'SystemSpecs',
                    logo: 'https://www.systemspecs.com.ng/wp-content/uploads/2020/12/SystemSpecs-Logo.png',
                    location: 'Lagos, Nigeria',
                    type: 'physical',
                    skills: ['Cybersecurity', 'Network Security', 'Penetration Testing', 'SIEM'],
                    description: 'Protect our financial systems from security threats.',
                    posted: '1 week ago',
                    salary: '₦600,000 - ₦900,000 monthly'
                },
                {
                    title: 'AI Engineer',
                    company: 'Data Science Nigeria',
                    logo: 'https://www.datasciencenigeria.org/wp-content/uploads/2019/03/dsn-logo.png',
                    location: 'Remote (Nigeria)',
                    type: 'remote',
                    skills: ['Python', 'Machine Learning', 'TensorFlow', 'Data Analysis'],
                    description: 'Develop AI solutions for African business challenges.',
                    posted: '2 weeks ago',
                    salary: '₦500,000 - ₦800,000 monthly'
                }
            ];
            
            // DOM Elements
            const skillsContainer = document.getElementById('skillsContainer');
            const jobsList = document.getElementById('jobsList');
            const jobsSection = document.getElementById('jobsSection');
            const jobSearchInput = document.getElementById('jobSearchInput');
            const searchButton = document.getElementById('searchButton');
            const searchFilters = document.getElementById('searchFilters');
            const applicationFormContainer = document.getElementById('applicationFormContainer');
            const closeFormButton = document.getElementById('closeForm');
            const jobApplicationForm = document.getElementById('jobApplicationForm');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const resumeOptionLinks = document.querySelectorAll('input[name="resumeOption"]');
            const linkUploadContainer = document.getElementById('linkUploadContainer');
            const fileUploadContainer = document.getElementById('fileUploadContainer');
            const fileUploadBox = document.getElementById('fileUploadBox');
            const resumeFileInput = document.getElementById('resumeFile');
            const fileNameDisplay = document.getElementById('fileName');
            
            // State Management
            let selectedSkills = [];
            let selectedLocation = 'remote';
            let currentSearchTerm = '';
            let appliedFilters = [];
            
            // Initialize the application
            function init() {
                renderSkills();
                setupEventListeners();
                loadSavedFormData();
            }
            
            // Render skills in the skills container
            function renderSkills() {
                // Sort skills alphabetically
                const sortedSkills = [...skills].sort((a, b) => a.localeCompare(b));
                
                sortedSkills.forEach(skill => {
                    const skillElement = document.createElement('div');
                    skillElement.className = 'skill-tag';
                    skillElement.textContent = skill;
                    skillElement.addEventListener('click', function() {
                        this.classList.toggle('selected');
                        const skillName = this.textContent;
                        
                        if (this.classList.contains('selected')) {
                            if (!selectedSkills.includes(skillName)) {
                                selectedSkills.push(skillName);
                                addFilter('skill', skillName);
                            }
                        } else {
                            selectedSkills = selectedSkills.filter(s => s !== skillName);
                            removeFilter('skill', skillName);
                        }
                        
                        filterJobs();
                    });
                    
                    skillsContainer.appendChild(skillElement);
                });
            }
            
            // Set up all event listeners
            function setupEventListeners() {
                // Location selection
                document.querySelectorAll('input[name="location"]').forEach(radio => {
                    radio.addEventListener('change', function() {
                        selectedLocation = this.value;
                        addFilter('location', this.value);
                        filterJobs();
                    });
                });
                
                // Search input
                jobSearchInput.addEventListener('input', function() {
                    currentSearchTerm = this.value.toLowerCase();
                    if (currentSearchTerm) {
                        addFilter('search', currentSearchTerm);
                    } else {
                        removeFilter('search');
                    }
                    filterJobs();
                });
                
                searchButton.addEventListener('click', filterJobs);
                
                // File upload handling
                resumeOptionLinks.forEach(option => {
                    option.addEventListener('change', function() {
                        if (this.value === 'link') {
                            linkUploadContainer.classList.add('active');
                            fileUploadContainer.classList.remove('active');
                            document.getElementById('resumeLink').required = true;
                            resumeFileInput.required = false;
                        } else {
                            linkUploadContainer.classList.remove('active');
                            fileUploadContainer.classList.add('active');
                            document.getElementById('resumeLink').required = false;
                            resumeFileInput.required = true;
                        }
                    });
                });
                
                fileUploadBox.addEventListener('click', function() {
                    resumeFileInput.click();
                });
                
                resumeFileInput.addEventListener('change', handleFileSelect);
                
                // Drag and drop functionality
                fileUploadBox.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.borderColor = '#3498db';
                    this.style.backgroundColor = '#f0f8ff';
                });
                
                fileUploadBox.addEventListener('dragleave', function() {
                    this.style.borderColor = '#ddd';
                    this.style.backgroundColor = 'transparent';
                });
                
                fileUploadBox.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.style.borderColor = '#ddd';
                    this.style.backgroundColor = 'transparent';
                    
                    if (e.dataTransfer.files.length) {
                        resumeFileInput.files = e.dataTransfer.files;
                        handleFileSelect();
                    }
                });
                
                // Form submission
                jobApplicationForm.addEventListener('submit', handleFormSubmit);
                
                // Close form button
                closeFormButton.addEventListener('click', closeApplicationForm);
                
                // Close form when clicking outside
                applicationFormContainer.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeApplicationForm();
                    }
                });
                
                // Keyboard navigation
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && applicationFormContainer.style.display === 'flex') {
                        closeApplicationForm();
                    }
                });
            }
            
            // Handle file selection
            function handleFileSelect() {
                if (resumeFileInput.files.length > 0) {
                    const file = resumeFileInput.files[0];
                    if (file.size > 5 * 1024 * 1024) { // 5MB limit
                        alert('File size exceeds 5MB limit');
                        resumeFileInput.value = '';
                        fileNameDisplay.style.display = 'none';
                    } else {
                        fileNameDisplay.textContent = file.name;
                        fileNameDisplay.style.display = 'block';
                    }
                }
            }
            
            // Filter jobs based on selected criteria
            function filterJobs() {
                // Only show jobs section if filters are active
                if (selectedSkills.length > 0 || currentSearchTerm || selectedLocation !== 'remote') {
                    jobsSection.style.display = 'block';
                } else {
                    jobsSection.style.display = 'none';
                    return;
                }
                
                const filteredJobs = jobs.filter(job => {
                    // Check location
                    const locationMatch = 
                        selectedLocation === 'both' || 
                        job.type === selectedLocation;
                    
                    // Check skills
                    const skillsMatch = selectedSkills.length === 0 || 
                                      selectedSkills.some(skill => job.skills.includes(skill));
                    
                    // Check search term
                    const searchMatch = currentSearchTerm === '' ||
                                       job.title.toLowerCase().includes(currentSearchTerm) ||
                                       job.company.toLowerCase().includes(currentSearchTerm) ||
                                       job.skills.some(skill => skill.toLowerCase().includes(currentSearchTerm)) ||
                                       job.location.toLowerCase().includes(currentSearchTerm) ||
                                       job.description.toLowerCase().includes(currentSearchTerm);
                    
                    return locationMatch && skillsMatch && searchMatch;
                });
                
                renderJobs(filteredJobs);
            }
            
            // Render jobs to the DOM
            function renderJobs(jobsToRender) {
        jobsList.innerHTML = '';
        
        if (jobsToRender.length === 0) {
            jobsList.innerHTML = `
                <div class="no-jobs">
                    <i class="fas fa-search" style="font-size: 48px; margin-bottom: 15px; color: #7f8c8d;"></i>
                    <h3>No jobs found matching your criteria</h3>
                    <p>Try adjusting your filters or search terms</p>
                </div>
            `;
            return;
        }
        
        jobsToRender.forEach(job => {
            const jobElement = document.createElement('div');
            jobElement.className = 'job-card';
            
            const skillsHTML = job.skills.map(skill => `
                <span class="job-skill">${skill}</span>
            `).join('');
            
            const typeBadge = job.type === 'remote' ? 
                '<span class="job-type"><i class="fas fa-laptop-house"></i> Remote</span>' : 
                '<span class="job-type"><i class="fas fa-building"></i> On-site</span>';
            
            jobElement.innerHTML = `
                <div class="company-logo">
                    <img src="${job.logo}" alt="${job.company} logo" onerror="this.src='https://via.placeholder.com/60/3498db/ffffff?text=${job.company.substring(0,2)}'">
                </div>
                <div class="job-details">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h3 class="job-title">${job.title}</h3>
                        <span style="font-size: 12px; color: #7f8c8d;">${job.posted}</span>
                    </div>
                    <div class="job-company">${job.company}</div>
                    <div class="job-location">
                        <i class="fas fa-map-marker-alt"></i> ${job.location}
                        ${typeBadge}
                    </div>
                    <div style="margin: 10px 0; color: #2c3e50; font-weight: 500;">${job.salary}</div>
                    <div class="job-skills">${skillsHTML}</div>
                    <p style="margin-top: 10px;">${job.description}</p>
                    <div class="job-actions">
                        <button 
                            onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSc1M1InVj0nL6LqlG14TrqthnukS8h7aPfEGNx8HuO5gzFA_Q/viewform?entry.123456789=${encodeURIComponent(job.title)}&entry.987654321=${encodeURIComponent(job.company)}', '_blank')"
                            class="apply-button">
                            Apply Now
                        </button>
                    </div>
                </div>
            `;
            
            jobsList.appendChild(jobElement);
        });
        
                // Add event listeners to apply buttons
                document.querySelectorAll('.apply-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const jobTitle = this.getAttribute('data-job-title');
                        const company = this.getAttribute('data-company');
                        openApplicationForm(jobTitle, company);
                    });
                });
            }
            
            // Open application form
            function openApplicationForm(jobTitle, company) {
                document.getElementById('appliedJobTitle').value = jobTitle;
                document.getElementById('appliedCompany').value = company;
                document.querySelector('.form-title').textContent = `Application for ${jobTitle} at ${company}`;
                applicationFormContainer.style.display = 'flex';
                successMessage.style.display = 'none';
                errorMessage.style.display = 'none';
                loadingSpinner.style.display = 'none';
                jobApplicationForm.style.display = 'block';
                
                // Reset form
                jobApplicationForm.reset();
                fileNameDisplay.style.display = 'none';
                document.querySelector('input[name="resumeOption"][value="link"]').checked = true;
                linkUploadContainer.classList.add('active');
                fileUploadContainer.classList.remove('active');
                
                // Load saved data
                loadSavedFormData();
                
                // Track this application start
                trackApplicationStart(jobTitle, company);
            }
            
            // Close application form
            function closeApplicationForm() {
                applicationFormContainer.style.display = 'none';
            }
            
            // Handle form submission
            function handleFormSubmit(e) {
                e.preventDefault();
                
                if (!validateForm()) {
                    return;
                }
                
                // Show loading state
                const submitButton = jobApplicationForm.querySelector('.submit-button');
                const originalButtonText = submitButton.innerHTML;
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                submitButton.disabled = true;
                
                jobApplicationForm.style.display = 'none';
                loadingSpinner.style.display = 'block';
                
                // Get form values
                const formData = {
                    fullName: document.getElementById('fullName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    coverLetter: document.getElementById('coverLetter').value,
                    jobTitle: document.getElementById('appliedJobTitle').value,
                    company: document.getElementById('appliedCompany').value,
                    applicationDate: new Date().toLocaleString()
                };
                
                // Get resume based on selected option
                const resumeOption = document.querySelector('input[name="resumeOption"]:checked').value;
                if (resumeOption === 'link') {
                    formData.resume = document.getElementById('resumeLink').value;
                    formData.resumeType = 'link';
                } else {
                    const file = resumeFileInput.files[0];
                    if (file) {
                        formData.resume = file.name;
                        formData.resumeType = 'file';
                        // In a real app, you would upload the file here
                    }
                }
                
                // Simulate API call with timeout
                setTimeout(() => {
                    // In a real app, you would:
                    // 1. Upload the file if needed
                    // 2. Submit the application data to your backend
                    // 3. Send confirmation email via EmailJS or your backend
                    
                    console.log('Application submitted:', formData);
                    
                    // Simulate random success/failure for demo purposes
                    const isSuccess = Math.random() > 0.2; // 80% success rate
                    
                    if (isSuccess) {
                        // Show success message
                        loadingSpinner.style.display = 'none';
                        successMessage.style.display = 'block';
                        
                        
                        
                        // Track successful application
                        trackApplicationSuccess(formData.jobTitle, formData.company);
                        
                        // Save form data for future use
                        saveFormData();
                        
                        // Close form after 3 seconds
                        setTimeout(closeApplicationForm, 3000);
                    } else {
                        // Show error message
                        loadingSpinner.style.display = 'none';
                        errorMessage.style.display = 'block';
                        jobApplicationForm.style.display = 'block';
                        
                        // Reset button state
                        submitButton.innerHTML = originalButtonText;
                        submitButton.disabled = false;
                    }
                }, 1500); // Simulate network delay
            }
            
            // Validate form inputs
            function validateForm() {
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const fullName = document.getElementById('fullName').value;
                let isValid = true;
                
                // Clear previous errors
                document.querySelectorAll('.error-message').forEach(el => el.remove());
                
                // Full name validation
                if (!fullName.trim()) {
                    showError('fullName', 'Please enter your full name');
                    isValid = false;
                }
                
                // Email validation
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    showError('email', 'Please enter a valid email address');
                    isValid = false;
                }
                
                // Nigerian phone number validation (basic)
                if (!/^(\+234|0)[789]\d{9}$/.test(phone)) {
                    showError('phone', 'Please enter a valid Nigerian phone number');
                    isValid = false;
                }
                
                // Resume validation
                const resumeOption = document.querySelector('input[name="resumeOption"]:checked').value;
                if (resumeOption === 'link') {
                    const resumeLink = document.getElementById('resumeLink').value;
                    if (!resumeLink) {
                        showError('resumeLink', 'Please provide a resume link');
                        isValid = false;
                    } else if (!isValidUrl(resumeLink)) {
                        showError('resumeLink', 'Please enter a valid URL');
                        isValid = false;
                    }
                } else {
                    if (!resumeFileInput.files.length) {
                        showError('fileUploadBox', 'Please select a file to upload');
                        isValid = false;
                    }
                }
                
                return isValid;
            }
            
            // Helper function to show error messages
            function showError(fieldId, message) {
                const field = document.getElementById(fieldId);
                const errorElement = document.createElement('div');
                errorElement.className = 'error-message';
                errorElement.textContent = message;
                errorElement.style.color = '#e74c3c';
                errorElement.style.fontSize = '14px';
                errorElement.style.marginTop = '5px';
                
                // Insert after the field
                field.parentNode.insertBefore(errorElement, field.nextSibling);
                
                // Highlight the field
                field.style.borderColor = '#e74c3c';
                field.addEventListener('input', function() {
                    this.style.borderColor = '#ddd';
                    if (errorElement.parentNode) {
                        errorElement.parentNode.removeChild(errorElement);
                    }
                });
            }
            
            // Helper function to validate URLs
            function isValidUrl(string) {
                try {
                    new URL(string);
                    return true;
                } catch (_) {
                    return false;
                }
            }
            
            // Save form data to localStorage
            function saveFormData() {
                const formData = {
                    fullName: document.getElementById('fullName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value
                };
                localStorage.setItem('jobApplicationFormData', JSON.stringify(formData));
            }
            
            // Load saved form data from localStorage
            function loadSavedFormData() {
                const savedData = localStorage.getItem('jobApplicationFormData');
                if (savedData) {
                    const formData = JSON.parse(savedData);
                    document.getElementById('fullName').value = formData.fullName || '';
                    document.getElementById('email').value = formData.email || '';
                    document.getElementById('phone').value = formData.phone || '';
                }
            }
            
            // Track application start (analytics)
            function trackApplicationStart(jobTitle, company) {
                console.log(`Tracking application start: ${jobTitle} at ${company}`);
                // In a real app, you would send this to Google Analytics or similar
                /*
                if (window.gtag) {
                    gtag('event', 'begin_application', {
                        'job_title': jobTitle,
                        'company': company
                    });
                }
                */
            }
            
            // Track successful application (analytics)
            function trackApplicationSuccess(jobTitle, company) {
                console.log(`Tracking successful application: ${jobTitle} at ${company}`);
                // In a real app, you would send this to Google Analytics or similar
                /*
                if (window.gtag) {
                    gtag('event', 'submit_application', {
                        'job_title': jobTitle,
                        'company': company,
                        'event_category': 'Job Applications'
                    });
                }
                */
            }
            
       
            // Add filter to the UI
            function addFilter(type, value) {
                // Check if filter already exists
                const existingFilter = appliedFilters.find(f => f.type === type && f.value === value);
                if (existingFilter) return;
                
                appliedFilters.push({ type, value });
                updateFilterDisplay();
            }
            
            // Remove filter from the UI
            function removeFilter(type, value) {
                if (value) {
                    appliedFilters = appliedFilters.filter(f => !(f.type === type && f.value === value));
                } else {
                    appliedFilters = appliedFilters.filter(f => f.type !== type);
                }
                updateFilterDisplay();
            }
            
            // Update the filter display
            function updateFilterDisplay() {
                searchFilters.innerHTML = '';
                
                appliedFilters.forEach(filter => {
                    const filterElement = document.createElement('div');
                    filterElement.className = 'filter-pill';
                    
                    let displayText = '';
                    let icon = '';
                    
                    switch (filter.type) {
                        case 'skill':
                            displayText = `Skill: ${filter.value}`;
                            icon = '<i class="fas fa-code"></i>';
                            break;
                        case 'location':
                            displayText = `Location: ${filter.value === 'remote' ? 'Remote' : 
                                         filter.value === 'physical' ? 'Physical (Nigeria)' : 'Both'}`;
                            icon = '<i class="fas fa-map-marker-alt"></i>';
                            break;
                        case 'search':
                            displayText = `Search: "${filter.value}"`;
                            icon = '<i class="fas fa-search"></i>';
                            break;
                    }
                    
                    filterElement.innerHTML = `
                        ${icon}
                        <span>${displayText}</span>
                        <span class="remove-filter" data-type="${filter.type}" data-value="${filter.value}">
                            <i class="fas fa-times"></i>
                        </span>
                    `;
                    
                    searchFilters.appendChild(filterElement);
                });
                
                // Add event listeners to remove buttons
                document.querySelectorAll('.remove-filter').forEach(button => {
                    button.addEventListener('click', function() {
                        const type = this.getAttribute('data-type');
                        const value = this.getAttribute('data-value');
                        
                        if (type === 'skill') {
                            // Find and unselect the skill tag
                            document.querySelectorAll('.skill-tag').forEach(tag => {
                                if (tag.textContent === value) {
                                    tag.classList.remove('selected');
                                }
                            });
                            selectedSkills = selectedSkills.filter(s => s !== value);
                        } else if (type === 'location') {
                            // Reset location radio
                            document.getElementById('remote').checked = true;
                            selectedLocation = 'remote';
                        } else if (type === 'search') {
                            // Clear search input
                            jobSearchInput.value = '';
                            currentSearchTerm = '';
                        }
                        
                        removeFilter(type, value);
                        filterJobs();
                    });
                });
            }
            
            // Initialize the application
            init();
        });
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</body>
</html>
                